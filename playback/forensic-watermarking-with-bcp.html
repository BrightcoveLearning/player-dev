---
title: "Forensic Watermarking with Brightcove Player"
description: "In this topic, you will learn how to use Brightcove Player to deliver videos protected with Forensic Watermarking."
parent: Playback
layout: staging
---

<article class="bcls-article">
  <h1>{{ page.title }}</h1>
  <summary>{{ page.description }}</summary>

  <section class="bcls-section">
    <h2 id="Introduction">Introduction</h2>
    <p>
      With Forensic Watermarking, you can protect your premium content from piracy and unauthorized content sharing. This feature adds an invisible watermark to your videos, allowing you to track any content leaks.
    </p>
    <p>For more information, see the <a href="">Overview: Forensic Watermarking</a> document.</p>
  </section>

  <section class="bcls-section">
    <h2 id="Requirements">Requirements</h2>
    <p>The following requirements are needed to support this feature:</p>
    <h3>Setup</h3>
    <p>There are setup requirements in addition to configuring your player. For details, see the <a href="">Overview: Forensic Watermarking</a> document.</p>

    <h3>Brightcove Player</h3>
    <p>Brightcove Player version 6.54+ required; latest version recommended</p>
  </section>

  <section class="bcls-section">
    <h2 id="Configuring_Brightcove_Player">Configuring Brightcove Player</h2>
    <p>
      To configure a player to use Forensic Watermarking, follow these steps:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>
          Before you get your video, set a string token with the value of your Nagra watermark key as part of the player catalog object.
        </p>
        <pre>
<code class="language-html" translate="No">catalog.setWatermarkingToken()</code></pre>
      </li>
      <li>
        <p>
          After setting the watermarking token, you are ready to request data from the Brightcove Playback API and load it into the player.
        </p>
        <p>
          Here is an example of fetching a single video:
        </p>
        <aside class="bcls-aside bcls-aside--tip language-editable">Notice that the <code translate="No">bc()</code> method is used to allow you to set the watermarking token before making a call to the catalog.</aside>
        <h3>HTML</h3>
  <pre class="line-numbers">
<code class="language-html" translate="No">&lt;div style=&quot;max-width: 960px;&quot;&gt;
  &lt;video-js id=&quot;myPlayerID&quot;
    data-embed=&quot;default&quot;
    controls=&quot;&quot;
    data-application-id=&quot;&quot;
    class=&quot;vjs-fluid&quot;&gt;
  &lt;/video-js&gt;
&lt;/div&gt;

&lt;script src=&quot;https://players.brightcove.net/your account id/your player id_default/index.min.js&quot;&gt;&lt;/script&gt;
</code></pre>
        <h3>JavaScript</h3>
<pre class="line-numbers">
<code class="language-javascript" translate="No">&lt;script&gt;
  // +++ Add the player attributes +++
  var myPlayer,
    myPlayerEl = document.getElementById(&quot;myPlayerID&quot;);
  myPlayerEl.setAttribute('data-account', your account id);
  myPlayerEl.setAttribute('data-player', 'your player id');

  // +++ Create the player +++
  myPlayer = bc(myPlayerEl);

  // Set the watermarking key
  <span class="bcls-highlight">myPlayer.catalog.setWatermarkingToken(<span class="bcls-input">your watermark token</span>)</span>;

  myPlayer.catalog.get({id: 'your video id', type: 'video'}).
  then(function(data) {
    myPlayer.catalog.load(data);
    myPlayer.muted(true);
    myPlayer.play();
  }).
  catch(function(error) {
    throw new Error(error);
  });
&lt;/script&gt;
</code></pre>
      </li>
    </ol> 
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_data_attribute">Using a data attribute</h2>
    <P>By default, all Brightcove Players make a request to the Playback API if it has a policy key. To make requests that check Playback Rights first, you need to remove the policy key. Here are two ways to do that:</P>
    <h3>Remove policy key from all players</h3>
    <p>To avoid the ingest of a policy key for new players created in Video Cloud Studio, do the following:</p>

    <ol class="bcls-tasklist-restart">
      <li>Contact your account manager.</li>
      <li>
        <p>Provide your account ID and ask to enable the <code translate="No">remove policy key</code> flag.</p>
      </li>
    </ol>

    <h3>Remove policy key from individual players</h3>
    <p>By default, the <code translate="No">remove policy key</code> flag is disabled for your account. To remove the policy key from individual players, do the following:</p>
    <ol class="bcls-tasklist-restart">
      <li>In Video Cloud Studio, navigate to the <strong>Players</strong> module.</li>
      <li>Select the player that you want to remove the policy key from.</li>
      <li>In the left navigation, select <strong>JSON Editor</strong>.</li>
      <li>
        <p>Set the <code translate="No">policy_key</code> field as <code translate="No">null</code>.</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/plugins/google-tag-manager/policy-key-editor.png"
          />
          <figcaption class="bcls-caption--image">JSON editor</figcaption>
        </figure>
      </li>
      <li>Save your changes and publish your player.</li>
    </ol>
      <!-- <pre>
        <code class="language-javascript" translate="No">player.catalog.setPolicyKey(null);</code></pre> -->
  </section>

  <section class="bcls-section">
    <h2 id="Making_requests_without_Playback_Rights">Making requests without Playback Rights</h2>
    <p>The process can be reversed to direct requests back to Playback API without rights and restrictions.</p>
    <p>
      Set the policy key and authorization token as follows:
    </p>
    <ol class="bcls-tasklist-restart">
      <li>
        <p>If you had the <code translate="No">remove policy key</code> flag enabled, then contact your account manager to disable it.</p>
        <aside class="bcls-aside bcls-aside--information">
          If you have the <code translate="No">remove policy key</code> flag enabled and you disable it, policy keys will be regenerated for all of your players, except those where you have set the <code translate="No">policy_key</code> field to <code translate="No">null</code>.
      </li>
      <li>
        <p>If you updated individual players in Studio, then update the JSON with your policy key.</p>
        <figure class="bcls-figure">
          <img
            class="bcls-image--no-border"
            alt="JSON editor"
            src="/assets/images/plugins/google-tag-manager/policy-key-defined.png"
          />
          <figcaption class="bcls-caption--image">JSON editor</figcaption>
        </figure>
      </li>
      <li>
        <p>Set the authorization token to <code translate="No">null</code>.</p>
        <pre>
<code class="language-javascript" translate="No">player.catalog.setBcovAuthToken(null);</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="Using_an_auth_token">Using an auth token</h2>
    <p>To use License Keys Protection, pass a string token as part of the <a href="https://player.support.brightcove.com/references/player-catalog.html">player catalog</a> object, using the property name <code translate="No">bcovAuthToken</code>.</p>
    <p>This approach works for both DRM and HLSe content. The player will detect the type of source being loaded from the Playback API and provide the correct implementation for that source.</p>

    <p>To use License Keys Protection, follow these steps:</p>
    <ol class="bcls-tasklist">
      <li>Create a signed <a href="https://general.support.brightcove.com/developer/create-json-web-token.html">JSON Web Token (JWT)</a>.</li>
      <li>
        <p>Include this token with the video request.</p>
        <p>This sample implementation code uses the <a href="https://player.support.brightcove.com/references/player-catalog.html#get_method">catalog.get()</a> method to request the video while supplying the token.</p>
    <aside class="bcls-aside bcls-aside--information language-editable">Be sure NOT to include the <code translate="No">data-video-id</code> parameter in the <code translate="No">&lt;video-js&gt;</code> tag.</aside>
<pre class="line-numbers">
  <code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
    data-account=&quot;1507807800001&quot;
    data-player=&quot;default&quot;
    data-embed=&quot;default&quot;
    controls
    data-application-id&gt;&lt;/video-js&gt;
  &lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;
  
  &lt;script&gt;
    (function() {
      var myPlayer = videojs.getPlayer('myPlayerID');
  
      myPlayer.catalog.get({
        type: 'video',
        id: '6015247091001',
        <span class="bcls-highlight">bcovAuthToken:</span> '<span class="bcls-input">your jwt token</span>'
      })
        .then(function(videoReturned){
          myPlayer.catalog.load(videoReturned);
        })
        .catch(function(err){
          console.log('err:', err);
        });
    })();
  &lt;/script&gt;</code></pre>
      </li>
    </ol>
  </section>

  <section class="bcls-section">
    <h2 id="configuring_server_side_ads_SSAI">Configuring server-side ads (SSAI)</h2>
    <p>If you are using License Keys Protection with SSAI, then you need to include an additional parameter to the catalog parameters object, named <code translate="No">adConfigId</code>. </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001',
      bcovAuthToken: '<span class="bcls-input">your jwt token</span>',
      <span class="bcls-highlight">adConfigId:</span> '<span class="bcls-input">your ad configuration id</span>'
    })
      .then(function(videoReturned){
        myPlayer.catalog.load(videoReturned);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
  </section>

  <section class="bcls-section">
    <h2 id="Using_a_custom_implementation">Using a custom implementation</h2>
    <p>You may be using a custom implementation where you don't have the <code translate="No">bcovAuthToken</code> to set the value with the the <a href="https://support.brightcove.com/player-catalog#get_method">catalog.get()</a> method request. If you are using your own or a third-party player, you can use one of the following approaches to pass your token into the license request:</p>
    <ul>
      <li>
        HTTP header: <code translate="No">BCOV-Auth</code> (Not supported for HLSe)
      </li>
      <li>
        Cookie: <code translate="No">bcov-auth</code> (Not supported for HLSe)
      </li>
      <li>
        Query parameter: <code translate="No">bcov-auth</code> (Only supported for HLSe) Must be appended to the master manifest url, instead of the license url
      </li>
    </ul>
    <p>
      Here is an example showing how to set the <code translate="No">source.emeHeaders['BCOV-Auth']</code> attribute on the video object to the token. This inserts the <code translate="No">emeHeader</code> on each source AFTER the catalog request.
    </p>
    <pre class="line-numbers">
<code class="language-html" translate="No">&lt;video-js id=&quot;myPlayerID&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;default&quot;
  data-embed=&quot;default&quot;
  controls
  data-application-id&gt;&lt;/video-js&gt;
&lt;script src=&quot;//players.brightcove.net/1507807800001/default_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script&gt;
  (function() {
    var myPlayer = videojs.getPlayer('myPlayerID');

    myPlayer.catalog.get({
      type: 'video',
      id: '6015247091001'
    })
    .then(function(video){
      sources=video.sources;

      for (let i = 0; i &lt; sources.length; i++) {
        const source = sources[i];

        // Only add the auth token as an eme header for DRM content
        if (<span class="bcls-input">your jwt token</span> &amp;&amp; source.key_systems) {
          source.emeHeaders = {
              'BCOV-Auth': <span class="bcls-input">your jwt token</span>
            };
        }
      }
        myPlayer.catalog.load(video);
      })
      .catch(function(err){
        console.log('err:', err);
      });
  })();
&lt;/script&gt;</code></pre>
    <!-- <p>
      For more details about working with MPEG-DASH, see the <a href="https://support.brightcove.com/creating-dash-drm-manifest-brightcove-player">Creating a DASH DRM Manifest for the Brightcove Player</a> document.
    </p> -->

  </section>
</article>